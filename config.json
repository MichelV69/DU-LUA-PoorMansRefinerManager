{"slots":{"0":{"name":"refiner","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-3":{"name":"player","type":{"events":[],"methods":[]}},"-2":{"name":"construct","type":{"events":[],"methods":[]}},"-4":{"name":"system","type":{"events":[],"methods":[]}},"-5":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"unit.setTimer(\"CheckStatus\",21)","filter":{"args":[{"value":"6"}],"signature":"onStatusChanged(status)","slotKey":"0"},"key":"0"},{"code":"unit.setTimer(\"CheckStatus\",21)","filter":{"args":[{"value":"3"}],"signature":"onStatusChanged(status)","slotKey":"0"},"key":"1"},{"code":"unit.setTimer(\"CheckStatus\",21)","filter":{"args":[{"value":"1"}],"signature":"onStatusChanged(status)","slotKey":"0"},"key":"2"},{"code":"unit.setTimer(\"CheckStatus\",21)","filter":{"args":[],"signature":"onBankUpdate()","slotKey":"0"},"key":"3"},{"code":"switch_product()","filter":{"args":[{"value":"CheckStatus"}],"signature":"onTimer(tag)","slotKey":"-1"},"key":"4"},{"code":"desiredOreLoadInStock = 222 --export: Maintain how much of each?\nversion = \"1.0.3\"\nrev_date = \"13Nov2022\"\n\nfunction switch_product()\n    -- first, turn the running timer off\n    unit.stopTimer(\"CheckStatus\")\n    \n    --- NB - status condtions\n    -- status 3 -> jammed, no materials\n    -- status 6 -> pending, probably maintain is satisfied\n\n    --- T1 Ore List\n    -- 198782496, -- hematite -> iron\n    -- 2240749601, -- bauxite -> aluminum\n    -- 159858782, -- coal -> carbon\n    -- 2589986891, -- qurtz -> silicon\n\n    local currentItem = refiner.getOutputs()\n\n    -- linked list to cycle possible recipes\n    local refinedOres = {}\n\n    refinedOres[198782496] = 2240749601;\n    refinedOres[2240749601] = 159858782;\n    refinedOres[159858782] = 2589986891;\n    refinedOres[2589986891] = 198782496;\n\n    if not refinedOres[currentItem[1].id] then\n        -- if the refiner was doing a batch of T2 originally, fall back to T1\n        currentItem = 198782496\n        end\n\n    -- handle the refiner\n    refiner.stop(true)\n    refiner.setOutput(refinedOres[currentItem[1].id])\n    refiner.startMaintain(desiredOreLoadInStock) \n\n    end","filter":{"args":[],"signature":"onStart()","slotKey":"-1"},"key":"5"}],"methods":[],"events":[]}
